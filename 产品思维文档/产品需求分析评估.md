# DreamAIChat · 产品需求分析评估

> 产品 Owner：邢浩哲  
> 评估范围：Android 客户端（以 Retrofit + Room 为主的本地增强体验）

---

## 1. 项目背景与产品使命

- **目标用户**：需要稳定、多模态（文本+图片）AI 对话能力的学习者与创作者；  
- **核心价值**：在移动端提供“可控、可追溯、可扩展”的 AI 伙伴，同时支持模板化启动、对话图谱梳理；  
- **产品定位**：强调“工程化可靠性 + 创意化体验”的 AI 对话工作台。

---



## 2. 需求分层（Must / Should / Could）

| 层级 | 需求描述 | 现状评估 | 性能/体验指标 |
| --- | --- | --- | --- |
| MUST | 登录鉴权、对话主流程、历史回溯 | ✅ 已实现，Room + Retrofit 打通 | - 首次登录 < 3s<br>- 历史加载 ≤ 400ms |
| MUST | 多轮对话 + 图文发送 | ✅ 支持文本/多图，AI 回复入库 | - 图片压缩 1280px 内<br>- AI 延迟受联网影响 |
| MUST | 文档/部署标准化 | ✅ 架构白皮书 / 部署指南保持同步 | - 文档与代码差异 ≤ 1 个版本 |
| SHOULD | 模板中心 & 对话图谱 | ✅ 模板回填输入框；图谱生成总结提示 | - 模板选择 → Chat 回填 ≤ 1s |
| SHOULD | Session 指标（对话/消息/使用天数） | ✅ ProfileFragment 实时统计 | - 统计刷新延迟 ≤ 1s |
| COULD | 网络诊断 & 模型切换策略 | ✅ 提供 `/api/diagnostics/providers` 接口，UI 暂未暴露细粒度策略 | - 诊断接口响应 ≤ 3s |

---



## 3. 核心功能评估

### 3.1 ChatFragment（核心舞台）

- **需求**：稳定的消息展示、附件发送、模型切换、快捷操作；
- **实现亮点**：
  - `pendingPrompt` 机制打通模板/图谱 → 输入框；
  - `ImageButton` + `HorizontalScrollView` 让输入区可扩展，布局结构与 `APP界面设计白皮书_v3.0` 保持一致；
  - `MessageRepository` + `ConversationRepository` 分离读写，确保多轮消息可追溯；
  - 超时策略已调整到 120s，对复杂任务友好。
- **风险**：联网依赖 Demo Key 时仍为“演示模式”，需配合部署指南 §14 排查。

### 3.2 HistoryFragment（效率中枢）

- **需求**：可搜索、可快速回到会话；
- **实现亮点**：空态引导直接调用 `ChatViewModel.startNewChat()`，搜索实时过滤 `LiveData`；
- **待提升**：后续可增加多选删除、标签归档。

### 3.3 ProfileFragment（指标 + 特色入口）

- **需求**：展示使用统计 & 入口联动；
- **实现亮点**：
  - `SessionManager` 提供使用天数；Room 同步统计对话数/消息数；
  - “对话模板 / 对话图谱”入口与 Drawer 统一，满足产品白皮书 v3.0 的一致性目标；
  - 头像、按钮 icon 均在部署指南 §9 中提供替换流程，小白可复现。

### 3.4 TemplateSelection & ConversationGraph

- **需求**：让用户快速复用专业 Prompt，或对历史对话做归纳；
- **实现亮点**：
  - 模板采用 `RecyclerView + MaterialCard`，图标统一由 Image Asset 生成，符合资源替换规范；
  - 图谱点击后会拉取完整消息，格式化“用户/AI”标签 + 提示语，写回输入框等待用户确认；
  - `MainActivity.showChatFragment()` 保证回流路径明确。

---



## 4. 产品思考：性能标准 vs 特色功能

1. **高性能底线**：  
   - 网络：Android 端 `readTimeout=120s`，后端 WebClient 同步调整，确保长文本任务不易崩；  
   - 本地：Room 读写在 IO 线程，UI 层仅订阅 LiveData；  
   - 诊断：新增 `/api/diagnostics/providers`，直接告诉使用者是否“服务器可上网、Key 是否有效”。

2. **特色能力塑造**：  
   - 模板中心：以“场景化 Prompt”帮助用户快速进入工作状态；  
   - 对话图谱：虽然未做可视化，但通过完整文本拼接 + 流程提示，满足训练营“总结 + 图谱描述”目标；  
   - 统一 icon 资源策略：在部署指南第 9 章详细列出替换路径，降低交付风险。

3. **工程意识体现**：  
   - 所有改动要求同步更新文档（部署指南、架构白皮书、API 说明）；  
   - 与 AI 协作时，坚持“需求→实现→文档”三段式闭环；  
   - 关键 bug（历史丢失、iconGravity、资源缺失）全部沉淀在《故障排查及解决文档》，形成可追溯记录。

---



## 5. 总结

DreamAIChat 在核心链路（登录→聊天→历史→模板/图谱→文档）上已经达到“高标准要求 + 工程化可复现”的阶段。下一步的重点是：

1. 保持文档与代码同步（继续践行 v3.0 UI设计白皮书 的准则）；  
2. 通过 Prompt 工程推动特色功能打磨（模板、图谱、诊断等）；  

我 (邢浩哲) 本人在后续的开发中仍将作为产品 Owner 持续主导需求决策与 Prompt 规范，确保整个项目在训练营交付阶段呈现出“高标准 + 工程意识 + 创意表达”的综合实力。

