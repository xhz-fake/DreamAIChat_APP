# DreamAIChat_APP éƒ¨ç½²æ–‡æ¡£

## 1. ç¯å¢ƒè¦æ±‚

### 1.1 å¼€å‘ç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS, æˆ– Linux
- **JDK**: JDK 11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Android Studio**: Arctic Fox (2020.3.1) æˆ–æ›´é«˜ç‰ˆæœ¬
- **Gradle**: 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆé¡¹ç›®å·²åŒ…å« Gradle Wrapperï¼‰
- **Android SDK**: API 21 (Android 5.0) æˆ–æ›´é«˜ç‰ˆæœ¬

### 1.2 ç¡¬ä»¶è¦æ±‚

- **å†…å­˜**: è‡³å°‘ 8GB RAMï¼ˆæ¨è 16GBï¼‰
- **å­˜å‚¨ç©ºé—´**: è‡³å°‘ 10GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥ä»¥ä¸‹è½½ä¾èµ–

## 2. é¡¹ç›®ç»“æ„

```
DreamAIChat_APP/
â”œâ”€â”€ app/                          # åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/            # Java æºä»£ç 
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ com/example/dreamaichat_app/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ data/    # æ•°æ®å±‚
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ domain/ # é¢†åŸŸå±‚
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ mvi/    # MVI æ¶æ„åŸºç¡€
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ presentation/ # è¡¨ç°å±‚
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ui/     # UI å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ res/            # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ AndroidManifest.xml
â”‚   â”‚   â””â”€â”€ test/               # æµ‹è¯•ä»£ç 
â”‚   â””â”€â”€ build.gradle.kts        # æ¨¡å—æ„å»ºé…ç½®
â”œâ”€â”€ gradle/                     # Gradle é…ç½®
â”‚   â””â”€â”€ libs.versions.toml     # ä¾èµ–ç‰ˆæœ¬ç®¡ç†
â”œâ”€â”€ build.gradle.kts            # é¡¹ç›®æ„å»ºé…ç½®
â”œâ”€â”€ settings.gradle.kts         # é¡¹ç›®è®¾ç½®
â””â”€â”€ gradlew                     # Gradle Wrapper (Unix)
```

## 3. å®‰è£…æ­¥éª¤

### 3.1 å…‹éš†é¡¹ç›®

```bash
# å¦‚æœé¡¹ç›®åœ¨ Git ä»“åº“ä¸­
git clone <repository-url>
cd DreamAIChat_APP
```

### 3.2 é…ç½® Android Studio

1. **æ‰“å¼€é¡¹ç›®**
   - å¯åŠ¨ Android Studio
   - é€‰æ‹© `File` â†’ `Open`
   - é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•

2. **åŒæ­¥ Gradle**
   - Android Studio ä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®å¹¶æç¤ºåŒæ­¥
   - ç‚¹å‡» `Sync Now` æˆ–ç­‰å¾…è‡ªåŠ¨åŒæ­¥å®Œæˆ
   - é¦–æ¬¡åŒæ­¥å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆä¸‹è½½ä¾èµ–ï¼‰

3. **é…ç½® SDK**
   - æ‰“å¼€ `File` â†’ `Project Structure` â†’ `SDK Location`
   - ç¡®ä¿å·²å®‰è£… Android SDK Platform 21 æˆ–æ›´é«˜ç‰ˆæœ¬
   - ç¡®ä¿å·²å®‰è£… Android SDK Build-Tools

### 3.3 é…ç½® API åœ°å€

1. **æ‰“å¼€ç½‘ç»œé…ç½®**
   ```
   app/src/main/java/com/example/dreamaichat_app/data/remote/RetrofitClient.java
   ```

2. **ä¿®æ”¹ BASE_URL**
   ```java
   private static final String BASE_URL = "https://your-api-server.com/";
   ```

3. **é…ç½®è®¤è¯ Tokenï¼ˆå¦‚éœ€è¦ï¼‰**
   - åœ¨ `SendMessageUseCase` ä¸­é…ç½®å®é™…çš„è®¤è¯ Token
   - æˆ–å®ç° Token ç®¡ç†æœºåˆ¶

### 3.4 é…ç½®æ•°æ®åº“

é¡¹ç›®ä½¿ç”¨ Room æ•°æ®åº“ï¼Œé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ã€‚å¦‚éœ€ä¿®æ”¹æ•°æ®åº“é…ç½®ï¼š

1. **æ‰“å¼€æ•°æ®åº“é…ç½®**
   ```
   app/src/main/java/com/example/dreamaichat_app/data/database/AppDatabase.java
   ```

2. **ä¿®æ”¹æ•°æ®åº“åç§°ï¼ˆå¦‚éœ€è¦ï¼‰**
   ```java
   private static final String DATABASE_NAME = "your_database_name";
   ```

3. **é…ç½®æ•°æ®åº“è¿ç§»ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰**
   - å½“å‰ä½¿ç”¨ `fallbackToDestructiveMigration()`ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
   - ç”Ÿäº§ç¯å¢ƒéœ€è¦å®ç° `Migration` ç±»

## 4. æ„å»ºé¡¹ç›®

### 4.1 ä½¿ç”¨ Android Studio

1. **é€‰æ‹©æ„å»ºå˜ä½“**
   - ç‚¹å‡» `Build` â†’ `Select Build Variant`
   - é€‰æ‹© `debug` æˆ– `release`

2. **æ„å»º APK**
   - ç‚¹å‡» `Build` â†’ `Build Bundle(s) / APK(s)` â†’ `Build APK(s)`
   - æ„å»ºå®Œæˆåï¼ŒAPK ä½äº `app/build/outputs/apk/`

3. **è¿è¡Œåº”ç”¨**
   - è¿æ¥ Android è®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
   - ç‚¹å‡» `Run` â†’ `Run 'app'` æˆ–æŒ‰ `Shift + F10`

### 4.2 ä½¿ç”¨å‘½ä»¤è¡Œ

#### Windows

```powershell
# æ¸…ç†æ„å»º
.\gradlew clean

# æ„å»º Debug APK
.\gradlew assembleDebug

# æ„å»º Release APK
.\gradlew assembleRelease

# å®‰è£…åˆ°è®¾å¤‡
.\gradlew installDebug
```

#### macOS/Linux

```bash
# æ¸…ç†æ„å»º
./gradlew clean

# æ„å»º Debug APK
./gradlew assembleDebug

# æ„å»º Release APK
./gradlew assembleRelease

# å®‰è£…åˆ°è®¾å¤‡
./gradlew installDebug
```

## 5. è¿è¡Œåº”ç”¨

### 5.1 åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ

1. **åˆ›å»ºæ¨¡æ‹Ÿå™¨**
   - æ‰“å¼€ `Tools` â†’ `Device Manager`
   - ç‚¹å‡» `Create Device`
   - é€‰æ‹©è®¾å¤‡å‹å·å’Œç³»ç»Ÿé•œåƒï¼ˆAPI 21+ï¼‰
   - å®Œæˆåˆ›å»º

2. **è¿è¡Œåº”ç”¨**
   - é€‰æ‹©åˆ›å»ºçš„æ¨¡æ‹Ÿå™¨
   - ç‚¹å‡» `Run` æŒ‰é’®

### 5.2 åœ¨çœŸæœºä¸Šè¿è¡Œ

1. **å¯ç”¨å¼€å‘è€…é€‰é¡¹**
   - æ‰“å¼€è®¾å¤‡ `è®¾ç½®` â†’ `å…³äºæ‰‹æœº`
   - è¿ç»­ç‚¹å‡» `ç‰ˆæœ¬å·` 7æ¬¡
   - è¿”å›è®¾ç½®ï¼Œæ‰¾åˆ° `å¼€å‘è€…é€‰é¡¹`

2. **å¯ç”¨ USB è°ƒè¯•**
   - åœ¨ `å¼€å‘è€…é€‰é¡¹` ä¸­å¯ç”¨ `USB è°ƒè¯•`
   - è¿æ¥è®¾å¤‡åˆ°ç”µè„‘

3. **è¿è¡Œåº”ç”¨**
   - Android Studio ä¼šè‡ªåŠ¨æ£€æµ‹è®¾å¤‡
   - é€‰æ‹©è®¾å¤‡å¹¶ç‚¹å‡» `Run`

## 6. å¸¸è§é—®é¢˜

### 6.1 Gradle åŒæ­¥å¤±è´¥

**é—®é¢˜**: Gradle åŒæ­¥æ—¶å‡ºç°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥ `gradle/libs.versions.toml` ä¸­çš„ç‰ˆæœ¬å·æ˜¯å¦æ­£ç¡®
3. æ¸…ç†é¡¹ç›®: `File` â†’ `Invalidate Caches / Restart`
4. åˆ é™¤ `.gradle` æ–‡ä»¶å¤¹åé‡æ–°åŒæ­¥

### 6.2 ä¾èµ–ä¸‹è½½å¤±è´¥

**é—®é¢˜**: ä¾èµ–ä¸‹è½½è¶…æ—¶æˆ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. é…ç½®å›½å†…é•œåƒæºï¼ˆå¦‚é˜¿é‡Œäº‘ï¼‰
2. åœ¨ `build.gradle.kts` ä¸­æ·»åŠ é•œåƒé…ç½®:
   ```kotlin
   repositories {
       maven { url = uri("https://maven.aliyun.com/repository/public") }
       google()
       mavenCentral()
   }
   ```

### 6.3 Room ç¼–è¯‘é”™è¯¯

**é—®é¢˜**: Room æ³¨è§£å¤„ç†å™¨æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿å·²æ·»åŠ  `kotlin-kapt` æ’ä»¶
2. ç¡®ä¿ `room-compiler` ä¾èµ–å·²æ­£ç¡®é…ç½®
3. æ¸…ç†å¹¶é‡æ–°æ„å»ºé¡¹ç›®

### 6.4 ViewBinding ä¸å·¥ä½œ

**é—®é¢˜**: ViewBinding ç”Ÿæˆçš„ç±»æ‰¾ä¸åˆ°

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ `buildFeatures { viewBinding = true }` å·²é…ç½®
2. æ¸…ç†å¹¶é‡æ–°æ„å»ºé¡¹ç›®
3. æ£€æŸ¥å¸ƒå±€æ–‡ä»¶åç§°æ˜¯å¦æ­£ç¡®ï¼ˆä¸èƒ½ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼‰

### 6.5 ç½‘ç»œè¯·æ±‚å¤±è´¥

**é—®é¢˜**: API è¯·æ±‚è¿”å›é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `RetrofitClient` ä¸­çš„ `BASE_URL` æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œæƒé™æ˜¯å¦å·²æ·»åŠ ï¼ˆAndroidManifest.xmlï¼‰
3. æ£€æŸ¥ API æœåŠ¡å™¨æ˜¯å¦å¯è®¿é—®
4. æŸ¥çœ‹ Logcat ä¸­çš„é”™è¯¯ä¿¡æ¯

## 7. é…ç½®è¯´æ˜

### 7.1 ç½‘ç»œæƒé™

ç¡®ä¿ `AndroidManifest.xml` ä¸­åŒ…å«ç½‘ç»œæƒé™:

```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

### 7.2 åº”ç”¨é…ç½®

**åº”ç”¨ ID**: `com.example.dreamaichat_app`

å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `app/build.gradle.kts`:
```kotlin
defaultConfig {
    applicationId = "com.yourcompany.dreamaichat_app"
    // ...
}
```

**ç‰ˆæœ¬ä¿¡æ¯**:
- Version Code: 1
- Version Name: "1.0"

### 7.3 ç­¾åé…ç½®ï¼ˆRelease æ„å»ºï¼‰

1. **ç”Ÿæˆå¯†é’¥åº“**
   ```bash
   keytool -genkey -v -keystore dreamai-release.jks -keyalg RSA -keysize 2048 -validity 10000 -alias dreamai
   ```

2. **é…ç½®ç­¾å**
   åœ¨ `app/build.gradle.kts` ä¸­æ·»åŠ :
   ```kotlin
   android {
       signingConfigs {
           create("release") {
               storeFile = file("path/to/keystore.jks")
               storePassword = "your-store-password"
               keyAlias = "dreamai"
               keyPassword = "your-key-password"
           }
       }
       buildTypes {
           release {
               signingConfig = signingConfigs.getByName("release")
               // ...
           }
       }
   }
   ```

## 8. å¼€å‘å»ºè®®

### 8.1 ä»£ç è§„èŒƒ

- éµå¾ª Java ç¼–ç è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œæ–¹æ³•å
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ä¿æŒä»£ç ç®€æ´

### 8.2 è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨ Logcat**
   - æŸ¥çœ‹åº”ç”¨æ—¥å¿—
   - è¿‡æ»¤ç‰¹å®šæ ‡ç­¾
   - æœç´¢é”™è¯¯ä¿¡æ¯

2. **ä½¿ç”¨æ–­ç‚¹**
   - åœ¨å…³é”®ä»£ç å¤„è®¾ç½®æ–­ç‚¹
   - ä½¿ç”¨è°ƒè¯•æ¨¡å¼è¿è¡Œåº”ç”¨
   - æ£€æŸ¥å˜é‡å€¼

3. **ä½¿ç”¨ Android Profiler**
   - ç›‘æ§ CPU ä½¿ç”¨
   - ç›‘æ§å†…å­˜ä½¿ç”¨
   - ç›‘æ§ç½‘ç»œè¯·æ±‚

### 8.3 æµ‹è¯•

1. **å•å…ƒæµ‹è¯•**
   - æµ‹è¯• UseCase å’Œ Repository
   - ä½¿ç”¨ JUnit å’Œ Mockito

2. **UI æµ‹è¯•**
   - ä½¿ç”¨ Espresso è¿›è¡Œ UI æµ‹è¯•
   - æµ‹è¯•å…³é”®ç”¨æˆ·æµç¨‹

## 9. å‘å¸ƒå‡†å¤‡

### 9.1 ä»£ç æ··æ·†

åœ¨ `app/proguard-rules.pro` ä¸­æ·»åŠ æ··æ·†è§„åˆ™:

```proguard
# Retrofit
-keepattributes Signature, InnerClasses
-keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations
-keepclassmembers,allowshrinking,allowobfuscation interface * {
    @retrofit2.http.* <methods>;
}

# Room
-keep class * extends androidx.room.RoomDatabase
-keep @androidx.room.Entity class *
```

### 9.2 èµ„æºä¼˜åŒ–

1. **ç§»é™¤æœªä½¿ç”¨çš„èµ„æº**
   ```bash
   ./gradlew clean
   ```

2. **å‹ç¼©å›¾ç‰‡èµ„æº**
   - ä½¿ç”¨ WebP æ ¼å¼
   - ä½¿ç”¨é€‚å½“çš„å›¾ç‰‡å°ºå¯¸

### 9.3 æ€§èƒ½ä¼˜åŒ–

1. **å¯ç”¨ ProGuard**
   ```kotlin
   buildTypes {
       release {
           isMinifyEnabled = true
           proguardFiles(getDefaultProguardFile("proguard-android-optimize.txt"), "proguard-rules.pro")
       }
   }
   ```

2. **å¯ç”¨èµ„æºå‹ç¼©**
   ```kotlin
   buildTypes {
       release {
           isShrinkResources = true
       }
   }
   ```

## 10. åç»­æ­¥éª¤

1. **å®ç°å‰©ä½™åŠŸèƒ½**
   - å®Œå–„èŠå¤©ç•Œé¢åŠŸèƒ½
   - å®ç°å†å²è®°å½•ç®¡ç†
   - å®ç°ä¸ªäººä¸­å¿ƒåŠŸèƒ½
   - å®ç°ç‰¹è‰²åŠŸèƒ½ï¼ˆæ¨¡æ¿ã€è·¯ç”±ã€å›¾è°±ï¼‰

2. **é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡**
   - å¾®ä¿¡ç™»å½• SDK
   - è‹¹æœç™»å½• SDK
   - æ¨é€æœåŠ¡

3. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ åŠ è½½åŠ¨ç”»
   - ä¼˜åŒ–é”™è¯¯æç¤º
   - æ·»åŠ ç¦»çº¿æ”¯æŒ

4. **æµ‹è¯•å’Œä¼˜åŒ–**
   - è¿›è¡Œå…¨é¢çš„åŠŸèƒ½æµ‹è¯•
   - æ€§èƒ½ä¼˜åŒ–
   - å†…å­˜æ³„æ¼æ£€æŸ¥

## 11. æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
2. æ£€æŸ¥ Logcat æ—¥å¿—
3. å‚è€ƒ Android å®˜æ–¹æ–‡æ¡£
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€

