# DreamAIChat_APP é¡¹ç›®å®Œæˆæƒ…å†µ

## âœ… å·²å®Œæˆæ¨¡å—

### 1. æ•°æ®å±‚ (Data Layer) - 100% å®Œæˆ

#### 1.1 æ•°æ®åº“ (Room)
- âœ… `AppDatabase.java` - Room æ•°æ®åº“ä¸»ç±»
- âœ… `DateConverter.java` - æ—¥æœŸç±»å‹è½¬æ¢å™¨
- âœ… `UserEntity.java` - ç”¨æˆ·å®ä½“
- âœ… `ConversationEntity.java` - ä¼šè¯å®ä½“
- âœ… `MessageEntity.java` - æ¶ˆæ¯å®ä½“

#### 1.2 æ•°æ®è®¿é—®å¯¹è±¡ (DAO)
- âœ… `UserDao.java` - ç”¨æˆ·æ•°æ®è®¿é—®
- âœ… `ConversationDao.java` - ä¼šè¯æ•°æ®è®¿é—®
- âœ… `MessageDao.java` - æ¶ˆæ¯æ•°æ®è®¿é—®

#### 1.3 æ•°æ®ä»“åº“ (Repository)
- âœ… `UserRepository.java` - ç”¨æˆ·æ•°æ®ä»“åº“
- âœ… `ConversationRepository.java` - ä¼šè¯æ•°æ®ä»“åº“
- âœ… `MessageRepository.java` - æ¶ˆæ¯æ•°æ®ä»“åº“

#### 1.4 ç½‘ç»œå±‚ (Remote)
- âœ… `RetrofitClient.java` - Retrofit å®¢æˆ·ç«¯
- âœ… `ApiService.java` - API æœåŠ¡æ¥å£
- âœ… `ApiResponse.java` - API ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… `LoginRequest.java` - ç™»å½•è¯·æ±‚æ¨¡å‹
- âœ… `LoginResponse.java` - ç™»å½•å“åº”æ¨¡å‹
- âœ… `ChatRequest.java` - èŠå¤©è¯·æ±‚æ¨¡å‹
- âœ… `ChatResponse.java` - èŠå¤©å“åº”æ¨¡å‹

### 2. MVI æ¶æ„åŸºç¡€ - 100% å®Œæˆ

- âœ… `Intent.java` - Intent æ¥å£
- âœ… `State.java` - State æ¥å£
- âœ… `ViewState.java` - ViewState æ¥å£
- âœ… `BaseViewModel.java` - MVI ViewModel åŸºç±»

### 3. é¢†åŸŸå±‚ (Domain Layer) - 100% å®Œæˆ

- âœ… `LoginUseCase.java` - ç™»å½•ç”¨ä¾‹
- âœ… `SendMessageUseCase.java` - å‘é€æ¶ˆæ¯ç”¨ä¾‹
- âœ… `GetMessagesUseCase.java` - è·å–æ¶ˆæ¯ç”¨ä¾‹
- âœ… `GetConversationsUseCase.java` - è·å–ä¼šè¯åˆ—è¡¨ç”¨ä¾‹

### 4. è¡¨ç°å±‚ (Presentation Layer) - éƒ¨åˆ†å®Œæˆ

#### 4.1 ç™»å½•æ¨¡å— - 100% å®Œæˆ
- âœ… `LoginIntent.java` - ç™»å½• Intent
- âœ… `LoginState.java` - ç™»å½• State
- âœ… `LoginViewModel.java` - ç™»å½• ViewModel

#### 4.2 å…¶ä»–æ¨¡å— - å¾…å®ç°
- â³ `ChatViewModel.java` - èŠå¤© ViewModelï¼ˆå¾…å®ç°ï¼‰
- â³ `HistoryViewModel.java` - å†å² ViewModelï¼ˆå¾…å®ç°ï¼‰
- â³ `ProfileViewModel.java` - ä¸ªäººä¸­å¿ƒ ViewModelï¼ˆå¾…å®ç°ï¼‰

### 5. UI å±‚ (UI Layer) - åŸºç¡€å®Œæˆ

#### 5.1 å·²å®Œæˆ
- âœ… `LoginActivity.java` - ç™»å½•ç•Œé¢ï¼ˆå®Œæ•´å®ç°ï¼‰
- âœ… `LoginViewModelFactory.java` - LoginViewModel å·¥å‚ç±»
- âœ… `MainActivity.java` - ä¸»ç•Œé¢ï¼ˆåŸºç¡€å®ç°ï¼‰
- âœ… `ChatFragment.java` - èŠå¤©ç•Œé¢ Fragmentï¼ˆåŸºç¡€å®ç°ï¼‰
- âœ… `HistoryFragment.java` - å†å²ç•Œé¢ Fragmentï¼ˆåŸºç¡€å®ç°ï¼‰
- âœ… `ProfileFragment.java` - ä¸ªäººä¸­å¿ƒç•Œé¢ Fragmentï¼ˆåŸºç¡€å®ç°ï¼‰

#### 5.2 å¸ƒå±€æ–‡ä»¶
- âœ… `activity_login.xml` - ç™»å½•ç•Œé¢å¸ƒå±€
- âœ… `activity_main.xml` - ä¸»ç•Œé¢å¸ƒå±€
- âœ… `fragment_chat.xml` - èŠå¤©ç•Œé¢å¸ƒå±€
- âœ… `fragment_history.xml` - å†å²ç•Œé¢å¸ƒå±€
- âœ… `fragment_profile.xml` - ä¸ªäººä¸­å¿ƒç•Œé¢å¸ƒå±€
- âœ… `nav_header.xml` - ä¾§è¾¹æ å¤´éƒ¨å¸ƒå±€
- âœ… `bottom_navigation.xml` - åº•éƒ¨å¯¼èˆªèœå•
- âœ… `nav_drawer.xml` - ä¾§è¾¹æ èœå•
- âœ… `toolbar_menu.xml` - å·¥å…·æ èœå•

### 6. èµ„æºæ–‡ä»¶ - å®Œæˆ

- âœ… `strings.xml` - å­—ç¬¦ä¸²èµ„æº
- âœ… `colors.xml` - é¢œè‰²èµ„æº
- âœ… `themes.xml` - ä¸»é¢˜èµ„æº

## â³ å¾…å®Œæˆæ¨¡å—

### 1. è¡¨ç°å±‚ (Presentation Layer)

#### 1.1 èŠå¤©æ¨¡å—
- â³ `ChatIntent.java` - èŠå¤© Intent
- â³ `ChatState.java` - èŠå¤© State
- â³ `ChatViewModel.java` - èŠå¤© ViewModel

#### 1.2 å†å²æ¨¡å—
- â³ `HistoryIntent.java` - å†å² Intent
- â³ `HistoryState.java` - å†å² State
- â³ `HistoryViewModel.java` - å†å² ViewModel

#### 1.3 ä¸ªäººä¸­å¿ƒæ¨¡å—
- â³ `ProfileIntent.java` - ä¸ªäººä¸­å¿ƒ Intent
- â³ `ProfileState.java` - ä¸ªäººä¸­å¿ƒ State
- â³ `ProfileViewModel.java` - ä¸ªäººä¸­å¿ƒ ViewModel

### 2. UI å±‚å¢å¼º

#### 2.1 Fragment å®Œæ•´å®ç°
- â³ `ChatFragment.java` - éœ€è¦æ·»åŠ  ViewModel ç»‘å®šã€æ¶ˆæ¯åˆ—è¡¨ã€å‘é€æ¶ˆæ¯ç­‰åŠŸèƒ½
- â³ `HistoryFragment.java` - éœ€è¦æ·»åŠ ä¼šè¯åˆ—è¡¨ã€æœç´¢ã€åˆ é™¤ç­‰åŠŸèƒ½
- â³ `ProfileFragment.java` - éœ€è¦æ·»åŠ ç”¨æˆ·ä¿¡æ¯å±•ç¤ºã€æ•°æ®ç»Ÿè®¡ç­‰åŠŸèƒ½

#### 2.2 ç‰¹è‰²åŠŸèƒ½ç•Œé¢
- â³ `SettingsActivity.java` - è®¾ç½®ç•Œé¢
- â³ `TemplateSelectionActivity.java` - æ¨¡æ¿é€‰æ‹©ç•Œé¢
- â³ `ModelRoutingActivity.java` - æ¨¡å‹è·¯ç”±ç•Œé¢
- â³ `ConversationGraphActivity.java` - å¯¹è¯å›¾è°±ç•Œé¢

#### 2.3 å¸ƒå±€æ–‡ä»¶
- â³ `activity_settings.xml` - è®¾ç½®ç•Œé¢å¸ƒå±€
- â³ `activity_template_selection.xml` - æ¨¡æ¿é€‰æ‹©ç•Œé¢å¸ƒå±€
- â³ `activity_model_routing.xml` - æ¨¡å‹è·¯ç”±ç•Œé¢å¸ƒå±€
- â³ `activity_conversation_graph.xml` - å¯¹è¯å›¾è°±ç•Œé¢å¸ƒå±€

### 3. æ¶ˆæ¯åˆ—è¡¨é€‚é…å™¨

- â³ `MessageAdapter.java` - æ¶ˆæ¯åˆ—è¡¨ RecyclerView é€‚é…å™¨
- â³ `item_message_user.xml` - ç”¨æˆ·æ¶ˆæ¯é¡¹å¸ƒå±€
- â³ `item_message_ai.xml` - AI æ¶ˆæ¯é¡¹å¸ƒå±€
- â³ `item_message_system.xml` - ç³»ç»Ÿæ¶ˆæ¯é¡¹å¸ƒå±€

### 4. ä¼šè¯åˆ—è¡¨é€‚é…å™¨

- â³ `ConversationAdapter.java` - ä¼šè¯åˆ—è¡¨ RecyclerView é€‚é…å™¨
- â³ `item_conversation.xml` - ä¼šè¯é¡¹å¸ƒå±€

## ğŸ“‹ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

### ä¼˜å…ˆçº§ 1ï¼šæ ¸å¿ƒåŠŸèƒ½å®Œå–„

1. **å®Œå–„ ChatFragment**
   - å®ç°æ¶ˆæ¯åˆ—è¡¨æ˜¾ç¤º
   - å®ç°æ¶ˆæ¯å‘é€åŠŸèƒ½
   - é›†æˆ ChatViewModel

2. **å®Œå–„ HistoryFragment**
   - å®ç°ä¼šè¯åˆ—è¡¨æ˜¾ç¤º
   - å®ç°ä¼šè¯æœç´¢åŠŸèƒ½
   - é›†æˆ HistoryViewModel

3. **å®Œå–„ ProfileFragment**
   - å®ç°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
   - å®ç°æ•°æ®ç»Ÿè®¡
   - é›†æˆ ProfileViewModel

### ä¼˜å…ˆçº§ 2ï¼šç‰¹è‰²åŠŸèƒ½

4. **åˆ›å»ºè®¾ç½®ç•Œé¢**
   - åº”ç”¨è®¾ç½®
   - è´¦æˆ·ç®¡ç†
   - å…³äºé¡µé¢

5. **åˆ›å»ºæ¨¡æ¿é€‰æ‹©ç•Œé¢**
   - æ¨¡æ¿åˆ—è¡¨
   - æ¨¡æ¿é¢„è§ˆ
   - æ¨¡æ¿åº”ç”¨

6. **åˆ›å»ºæ¨¡å‹è·¯ç”±ç•Œé¢**
   - æ¨¡å‹åˆ—è¡¨
   - æ¨¡å‹åˆ‡æ¢
   - æ¨¡å‹é…ç½®

7. **åˆ›å»ºå¯¹è¯å›¾è°±ç•Œé¢**
   - å¯¹è¯å…³ç³»å¯è§†åŒ–
   - å¯¹è¯æ ‘å±•ç¤º

### ä¼˜å…ˆçº§ 3ï¼šä¼˜åŒ–å’Œå¢å¼º

8. **æ·»åŠ æ¶ˆæ¯é€‚é…å™¨**
   - å®ç°æ¶ˆæ¯åˆ—è¡¨ RecyclerView
   - å®ç°æ¶ˆæ¯é¡¹å¸ƒå±€
   - å®ç°æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤º

9. **æ·»åŠ ä¼šè¯é€‚é…å™¨**
   - å®ç°ä¼šè¯åˆ—è¡¨ RecyclerView
   - å®ç°ä¼šè¯é¡¹å¸ƒå±€
   - å®ç°ä¼šè¯æ“ä½œï¼ˆåˆ é™¤ã€æ”¶è—ç­‰ï¼‰

10. **é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ**
    - æ·»åŠ åŠ è½½çŠ¶æ€
    - æ·»åŠ é”™è¯¯æç¤º
    - æ·»åŠ ç©ºçŠ¶æ€æ˜¾ç¤º
    - æ·»åŠ ä¸‹æ‹‰åˆ·æ–°

## ğŸ¯ å½“å‰é¡¹ç›®çŠ¶æ€

### å¯ä»¥è¿è¡Œçš„åŠŸèƒ½
- âœ… ç™»å½•ç•Œé¢ï¼ˆUI å®Œæ•´ï¼ŒåŠŸèƒ½å¯ç”¨ï¼‰
- âœ… ä¸»ç•Œé¢å¯¼èˆªï¼ˆåº•éƒ¨å¯¼èˆªå’Œä¾§è¾¹æ ï¼‰
- âœ… ä¸‰ä¸ª Fragment åŸºç¡€æ¡†æ¶ï¼ˆèŠå¤©ã€å†å²ã€ä¸ªäººä¸­å¿ƒï¼‰

### éœ€è¦å®Œå–„çš„åŠŸèƒ½
- â³ èŠå¤©åŠŸèƒ½ï¼ˆå‘é€æ¶ˆæ¯ã€æ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨ï¼‰
- â³ å†å²è®°å½•åŠŸèƒ½ï¼ˆæ˜¾ç¤ºä¼šè¯åˆ—è¡¨ã€æœç´¢ï¼‰
- â³ ä¸ªäººä¸­å¿ƒåŠŸèƒ½ï¼ˆç”¨æˆ·ä¿¡æ¯ã€æ•°æ®ç»Ÿè®¡ï¼‰
- â³ ç‰¹è‰²åŠŸèƒ½ç•Œé¢ï¼ˆè®¾ç½®ã€æ¨¡æ¿ã€è·¯ç”±ã€å›¾è°±ï¼‰

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“åˆå§‹åŒ–**
   - åº”ç”¨é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
   - æ•°æ®åº“æ–‡ä»¶ä½ç½®ï¼š`/data/data/com.example.dreamaichat_app/databases/dream_ai_chat_db`

2. **API é…ç½®**
   - å½“å‰ API åœ°å€ï¼š`http://10.0.2.2:8080/`ï¼ˆæ¨¡æ‹Ÿå™¨ï¼‰
   - éœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ `RetrofitClient.java` ä¸­çš„ `BASE_URL`

3. **ç”¨æˆ·è®¤è¯**
   - ç™»å½•æˆåŠŸåï¼ŒToken ä¼šä¿å­˜åœ¨æ•°æ®åº“ä¸­
   - åç»­ API è¯·æ±‚éœ€è¦ä½¿ç”¨ Tokenï¼ˆåœ¨ Header ä¸­ï¼‰

4. **çº¿ç¨‹ç®¡ç†**
   - æ•°æ®åº“æ“ä½œåœ¨åå°çº¿ç¨‹æ‰§è¡Œï¼ˆä½¿ç”¨ RxJavaï¼‰
   - UI æ›´æ–°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **åŒæ­¥ Gradle**
   - ç‚¹å‡» "Sync Project with Gradle Files"

2. **è¿è¡Œåº”ç”¨**
   - è¿æ¥è®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
   - ç‚¹å‡»è¿è¡ŒæŒ‰é’®

3. **æµ‹è¯•ç™»å½•**
   - è¾“å…¥è´¦å·å’Œå¯†ç 
   - ç‚¹å‡»ç™»å½•æŒ‰é’®
   - æŸ¥çœ‹ Logcat ç¡®è®¤ç½‘ç»œè¯·æ±‚

4. **æŸ¥çœ‹æ•°æ®åº“**
   - ä½¿ç”¨ Device File Explorer
   - å¯¼èˆªåˆ° `/data/data/com.example.dreamaichat_app/databases/`
   - æŸ¥çœ‹ `dream_ai_chat_db` æ–‡ä»¶

---

**æœ€åæ›´æ–°**: 2024å¹´
**é¡¹ç›®çŠ¶æ€**: åŸºç¡€æ¶æ„å®Œæˆï¼Œæ ¸å¿ƒåŠŸèƒ½å¾…å®Œå–„

